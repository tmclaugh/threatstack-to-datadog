language: python
python:
- '3.6'
install: pip install -r requirements.txt -t .
script:
- true
after_success:
- mkdir dist
- find ./ -name '*.pyc' -delete
- zip -r dist/threatstack-to-datadog.zip . -x '.git/*' -x 'dist/*'
- cp deploy/cloudformation.json dist/threatstack-to-datadog.json
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id:
    secure: wRaZdLhsczGYBRL4L7sfO6srarRnQeR0jmxioL19QhLNhmbQwuMAC42lb+at8FqRf5lbyD6elCReT/g0E/Aa12gW1G3ekOuyDFk9YhTkNUYH66uzua+kUWyAbB3gf/bUazvryS0CojH7Cc8X57ewvrXinD1PHqpFijSU5FOqbjiiWK9w/4rExcbBEPm/cp5kJV+r4BpK8mrf3TnVEsDVxwXy9TN7Q8IMWfgv9KBZ6Q0am9yNIfuWGkbrmWKtnmUN6BW1DkkVlinUFTcTGmSFX+5X9BTnPmM+a8tDILh5w2PShc8mkAfigq1oIc56WCiyFp9PbXd8Q5pCaWJv55NfTNwDiHtSlkg27IzXjmFMiqmZdgQRzYkyGcWw5/UXSGui6vdnjCio2/Cms5YOVz4twGKiKowO3Ty4oW6exGqhS2COahTm3zUxKBy5iuPdjQ+gSRgCiS2z3Y4OZhKFTkpRRuixhZ7JhJzJhuxAtOPDSfrb7b4mr6OHeO4tbI2sH/CObxcvarkXXzgob+Mq/OgQYYN0e/bimv0UHOQnvpxWgwRsgENnXveiF4F9YHuq6+/Ow2/BmKVaLRASnZ1di1EfANgBE914RyqtyhEA7wFw72uCxDdKrMduAAJ9k3varQZNHgaYrWsSeLcMUdVLRMAFYpACMTy+4YQ0E3p5hBXiQ7c=
  secret_access_key:
    secure: WtchxUe8/rDNppl+Kw2zsSgbpyH7NN2i1If0dvE2qaQsBcaLa4oEfLFFAP4tHp8yJ3xtBTOyvOpGiIbbjqXH1jzWFkwsL31Guxtd4Qo2z3b4rKPTX4ObMWpBTTkKn9Z1HNTgH37BWCpF6pujKMfN9ZQSXmKhNVC4Oo8/Dh0eZphoMaB7eOgNhysTD1pwrty4hOzIU75dT8P5iAPuhYI2KZyuYIEWHVT6f4RxOEYICRu8Jc8J0Ux/wAYL8KZvQNIGyTtLw6PX/s+nkZfs20ANUWUErIZ/tgRi3vEAQdTnr3qEPBD3kilx76QHwq8ev66RCUCCfoNw6HD2CoOHbOD1egLb2dJVmdOHwL/A6ml/Y/+a8x5GZ4Qx5zRZRuBaoeGBup4vr/p4uN+Lsd84/pyuSqwDKNpQGY9QaLWvU+XkduBQ0c/S81e7W7PSXxYhkzM/MN1kL2qZAp+YYMhshJevd83Um9IUveF1EEbMEFSfatqywfpfJo+8k/wVsuXiD3PX/lgDF8FyRvW42T2jYtqE/fiqL3bio37cMy8hQhb1wzRtckR67YDwwg2P4ciQXVrdePBJYQYi1erFpzN1dZxPospvqWsEmFzQJtHUtfZvvyi5GinKZ5UuEoNcY+Nj6GW2vTA9/akjDxnvR6R6xR4HmG81virCH7jcqSrFKL9j9Ks=
  bucket: ts-demo-lamba-deploys
  local-dir: dist
  acl: public_read
  on:
    repo: threatstack/threatstack-to-datadog
